---
import Layout from 'layouts/Layout.astro';
import Hero from 'sections/Hero.astro';
import Service from 'sections/Service.astro';
import Why from 'sections/Why.astro';
import Customer from 'sections/Customer.astro';
import Contact from 'sections/Contact.astro';

const title = 'Sv Tech';

export const prerender = true;
---

<Layout title={title}>
  <Hero />
  <Service />
  <Why />
  <Customer />
  <Contact />
</Layout>

<!-- ✅ DEFER Customer JavaScript (Astro way) -->
<script>
  // ✅ ASTRO EVENT - funciona con View Transitions y SPA
  document.addEventListener('astro:page-load', () => {
    // ✅ DELAY de 500ms para que primero se renderice lo crítico
    setTimeout(() => {
      // ✅ Verificar si el carrusel ya está inicializado
      const customerSection = document.getElementById('customers');
      if (customerSection && !customerSection.dataset.initialized) {
        // ✅ Marcar como inicializado
        customerSection.dataset.initialized = 'true';
        
        // ✅ Crear evento personalizado para inicializar el carrusel
        const initEvent = new CustomEvent('init-customer-carousel');
        document.dispatchEvent(initEvent);
      }
    }, 500);
  });
</script>
